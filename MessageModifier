/**
 * @name MessageModifier
 * @description Adds custom footer text to all your messages
 * @version 1.0.0
 * @author Lol
 */

module.exports = class MessageModifier {
    start() {
        // Hook into the message sending
        this.patchMessageSend();
    }

    stop() {
        // Restore original functionality
        if (this.originalSendMessage) {
            BdApi.Patcher.unpatchAll("MessageModifier");
        }
    }

    patchMessageSend() {
        const MessageQueue = BdApi.Webpack.getModule(m => m?.enqueue && m?.handleSend);
        
        if (!MessageQueue) {
            console.error("MessageModifier: Could not find MessageQueue module");
            return;
        }

        BdApi.Patcher.before("MessageModifier", MessageQueue, "enqueue", (_, args) => {
            const message = args[0];
            
            if (message && message.message && message.message.content) {
                const originalContent = message.message.content;
                
                // Create the spaces padding (70 spaces as shown in your example)
                const spaces = " ".repeat(70);
                
                // Build the footer text
                const footer = `(${spaces})
-# This user is suspected of conducting spy activities for the Russian Federation • [Learn more](<https://support.discord.com/hc/en-us>)
-# This user is under the supervision of the BKA • [Review](<https://www.bka.de/DE/Home/home_node.html>)
-# This user needs to get tormented by a Dominant Female by her feet • [DM NOW](<https://discordapp.com/users/1016016621397090384>)`;
                
                // Combine original message with footer
                message.message.content = originalContent + footer;
            }
        });
    }
};
